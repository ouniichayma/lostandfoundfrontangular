<body>
  <main>
    <nav class="main-menu">
      <div>
        <div class="user-info">





<div class="notification-container">
  <button class="notification-btn" (click)="toggleDropdown()">
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"
         fill="none" stroke="currentColor" stroke-width="2"
         stroke-linecap="round" stroke-linejoin="round"
         class="feather feather-bell">
      <path d="M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9" />
      <path d="M13.73 21a2 2 0 0 1-3.46 0" />
    </svg>
  </button>

  <div class="dropdown" *ngIf="showDropdown">
    <ul *ngIf="notifications.length > 0; else noNotif">
      <li *ngFor="let notif of notifications">
        {{ notif.message }} <br />
        <small>{{ notif.createdAt | date:'short' }}</small>
      </li>
    </ul>
    <ng-template #noNotif>
      <li>Aucune notification</li>
    </ng-template>
  </div>
</div>





          
          <img src="https://localhost:7243/{{ plog?.imageUrl}}" alt="user" />
          <p>{{plog.firstName}} {{plog.lastName}}</p>


          
        </div>
        <ul>





          <li class="nav-item active">
            <a routerLink="AddLost">
              <i class="far fa-images"></i>
              <span class="nav-text" style="margin-bottom: 15px; margin-left: 10px;">new lost object</span>
            </a>
          </li>

          <li class="nav-item">
            <a routerLink="AddFound">
              <i class="fas fa-bullhorn"></i>
              <span class="nav-text" style="margin-bottom: 40px; margin-left: 10px;">new found object</span>
            </a>
          </li>






        

        </ul>
      </div>

      <ul>
        <li class="nav-item">
          <a>
            <i class="fa fa-user nav-icon"></i>
            <span (click)=" logout()" class="nav-text">Profile</span>
          </a>
        </li>

        <li class="nav-item">
          <a href="#">
            <i class="fa fa-gear nav-icon"></i>
            <span class="nav-text">Settings</span>
          </a>
        </li>

        <li class="nav-item">
          <a href="#">
            <i class="fa fa-right-from-bracket nav-icon"></i>
            <span class="nav-text">Logout</span>
          </a>
        </li>
      </ul>
    </nav>

    <section class="content">
      <div class="left-content">


        <div class="artists">
          <h1>Featured users</h1>
          <div class="artist-container containers">
            <div class="artist" *ngFor="let user of users">
              <div class="artist-img-container"><img src="https://localhost:7243/{{ user?.imageUrl }}" alt="" /></div>
              <p>{{ user.firstName }} {{ user.lastName }} </p>
            </div>


          </div>
        </div>

        <div class="albums">
































          <!-- Blog Start -->
          <div class="container-fluid blog py-5">
            <div class="container py-5">
              <div class="mx-auto text-center wow fadeIn" data-wow-delay="0.1s" style="max-width: 600px;">
                <h4
                  class="text-primary mb-4 border-bottom border-primary border-2 d-inline-block p-2 title-border-radius">
                  Latest objects</h4>
                <h1 class="mb-5 display-3">Read Our Latest objects</h1>
              </div>

              <div class="row g-5 justify-content-center">
                <div class="col-md-6 col-lg-6 col-xl-4 wow fadeIn" *ngFor="let obj of pagedObjects">
                  <div class="blog-item rounded-bottom">
                    <!-- Image principale de l'objet -->
                    <div class="blog-img overflow-hidden position-relative img-border-radius">
                      <img [src]="'https://localhost:7243' + obj.imageUrl" class="img-fluid w-100" alt="Image">
                    </div>

                    <!-- Date et commentaires -->
                    <div
                      class="d-flex justify-content-between px-4 py-3 bg-light border-bottom border-primary blog-date-comments">
                      <small class="text-dark">
                        <i class="fas fa-calendar me-1 text-dark"></i>
                        {{ obj.date | date:'mediumDate' }}
                      </small>
                      <small class="text-dark">
                        <i class="fas fa-id-card me-1 text-dark"></i>
                        Statut : {{ obj.status }}
                      </small>
                    </div>

                    <!-- Infos utilisateur -->
                    <div class="blog-content d-flex align-items-center px-4 py-3 bg-light">
                      <div class="overflow-hidden rounded-circle rounded-top border border-primary">
                        <img [src]="'https://localhost:7243/' + obj.user.imageUrl"
                          class="img-fluid rounded-circle p-2 rounded-top" alt="User Image"
                          style="width: 70px; height: 70px; border-style: dotted; border-color: var(--bs-primary) !important;">
                      </div>
                      <div class="ms-3">
                        <h6 class="text-primary">{{ obj.user.firstName }} {{ obj.user.lastName }}</h6>
                        <p class="text-muted">{{ obj.category }}</p>
                      </div>
                    </div>

                    <!-- Description de l'objet -->
                    <div class="px-4 pb-4 bg-light rounded-bottom">
                      <div class="blog-text-inner">
                        <a [routerLink]="['/object-just', obj.id]" style="color: rgb(243, 110, 165);" class="h4">{{
                          obj.name }}</a>
                        <p class="mt-3 mb-4" style="color: rgb(243, 110, 165);">Couleur : {{ obj.color }} | Lieu : {{
                          obj.location }}</p>
                      </div>

                    </div>
                  </div>
                </div>


                <div class="text-center mt-4">
                  <button (click)="prevObjectPage()" [disabled]="objectPage === 1" class="btn btn-secondary me-2">
                    Pr√©c√©dent
                  </button>
                  <span>Page {{ objectPage }} / {{ totalObjectPages() }}</span>
                  <button (click)="nextObjectPage()" [disabled]="objectPage === totalObjectPages()"
                    class="btn btn-secondary ms-2">
                    Suivant
                  </button>
                </div>

              </div>

            </div>
          </div>
          <!-- Blog End -->













          <div class="mx-auto text-center wow fadeIn" data-wow-delay="0.1s" style="max-width: 600px;">
            <h4 class="text-primary mb-4 border-bottom border-primary border-2 d-inline-block p-2 title-border-radius">
              My Objects</h4>
            <h1 class="mb-5 display-3">Read your objects</h1>
          </div>






          <div class="row g-5 justify-content-center ">
            <div class="col-md-6 col-lg-6 col-xl-4 wow fadeIn" *ngFor="let obj of pageduserObjects">
              <div class="events-item bg-primary rounded">
                <div class="events-inner position-relative">
                  <div class="events-img overflow-hidden position-relative">
                    <img [src]="'https://localhost:7243' + obj.imageUrl" class="img-fluid " style="" alt="Image">

                  </div>
                  <div class="px-4 py-2 bg-secondary text-white text-center events-rate">
                    {{ obj.name }}

                    <br>
                    {{ obj.category }}

                  </div>
                  <div class="d-flex justify-content-between px-4 py-2 bg-secondary">
                    <small class="text-white">
                      <i class="fas fa-calendar me-1 text-primary"></i>
                      {{ obj.date | date: 'dd MMM' }}
                    </small>
                    <small class="text-white">
                      <i class="fas fa-map-marker-alt me-1 text-primary"></i>
                      {{ obj.location || 'Unknown' }}
                    </small>
                  </div>
                </div>
                <div class="events-text p-4 border border-primary bg-white border-top-0 rounded-bottom"
                  style="color: pink;">
                  <a class="h4">Couleur : {{ obj.color }} <br> Lieu : {{ obj.location }} <br> status : {{ obj.status
                    }}</a>





                  <!-- ‚úÖ Afficher l‚Äôobjet correspondant s‚Äôil existe -->
                  <div *ngIf="obj.matchedObject">
                    <hr>
                    <h5>üéØ Objet correspondant :</h5>
                    <p>
                      id : {{ obj.matchedObject.id}} <br>
                      Nom : {{ obj.matchedObject?.name }} <br>
                      Cat√©gorie : {{ obj.matchedObject?.category }} <br>
                      Couleur : {{ obj.matchedObject?.color }} <br>
                      Lieu : {{ obj.matchedObject?.location || 'Unknown' }} <br>
                      Date : {{ obj.matchedObject?.date | date:'dd MMM yyyy' }}
                      <img [src]="'https://localhost:7243' + obj.matchedObject?.imageUrl" class="img-fluid " style=""
                        alt="Image" />



                    </p>











                    <!-- Formulaire justificatif -->
                    <div class="mb-3">
                      <label for="justificatifFile">üìé Justificatif</label>
                      <input type="file" (change)="onJustificatifFileChange($event)" class="form-control" />
                    </div>
                    <button class="btn btn-primary" (click)="submitJustificatif(obj.matchedObject)">
                      Soumettre Justificatif
                    </button>
                  </div>








                  <p class="mb-0 mt-3"></p>
                </div>


              </div>
            </div>



            <div class="text-center mt-4">
              <button (click)="prevuserObjectPage()" [disabled]="userobjectPage === 1" class="btn btn-secondary me-2">
                Pr√©c√©dent
              </button>
              <span>Page {{ userobjectPage }} / {{ totaluserObjectPages() }}</span>
              <button (click)="nextuserObjectPage()" [disabled]="userobjectPage === totaluserObjectPages()"
                class="btn btn-secondary ms-2">
                Suivant
              </button>
            </div>
          </div>













        </div>
      </div>






      <div class="right-content">

























        <div>
          <h4 class="text-primary mb-4 border-bottom border-primary border-2 d-inline-block p-2 title-border-radius">My
            Justifications</h4>
          <div>
            <div *ngFor="let justificatif of pagedJustificatifs">
              <div class="song-img">
                <img [src]="'https://localhost:7243' + justificatif.proofImageUrl || justificatif.objectImageUrl"
                  alt="Justificatif" />

              </div>


              <div>
                <h2 style="color: rgb(236, 14, 121);">{{ justificatif.objectName || 'Objet inconnu' }}</h2>

                <p> status of Justification {{ justificatif.status }}</p>
                <p>{{ justificatif.objectcategory || 'Objet inconnu' }}</p>
                <p>{{ justificatif.objectcolor || 'Objet inconnu' }}</p>
                <p>{{ justificatif.objectbrand || 'Objet inconnu' }}</p>

              </div>

            </div>







            <div class="pagination-controls">
  <button (click)="goToPage(JustificatifcurrentPage - 1)" [disabled]="JustificatifcurrentPage === 1">Pr√©c√©dent</button>

  <span>Page {{ JustificatifcurrentPage }} sur {{ JustificatiftotalPages }}</span>

  <button (click)="goToPage(JustificatifcurrentPage + 1)" [disabled]="JustificatifcurrentPage === JustificatiftotalPages">Suivant</button>
</div>

          </div>
        </div>
      </div>








    </section>
  </main>
</body>